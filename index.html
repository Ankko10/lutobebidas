<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luto Bebidas - Distribuidora</title>
    <style>
        /* --- ESTILOS TEMA DARK LUXURY --- */
        :root {
            --accent-color: #ffffff;
            --dark-bg-main: #121212; 
            --dark-bg-secondary: #1e1e1e;
            --card-bg: #ffffff;
            --text-main: #f0f0f0;
            --text-dark: #111111;
            --border-dark: #333;
            --promo-red: #d32f2f;
            --naranjax: #FF6600;
        }
        
        body { 
            font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0;
            color: var(--text-main);
            overflow-x: hidden;
            min-height: 100vh;
            background-image: 
                linear-gradient(to bottom, rgba(44,44,44,0.94) 0%, rgba(0,0,0,0.98) 100%),
                url('logo-luto.png');
            background-repeat: repeat;        
            background-size: 150px auto;      
            background-position: center top; 
            background-attachment: fixed;    
        }

        /* ANIMACIONES */
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes bounceCart { 0%, 20%, 50%, 80%, 100% { transform: translateY(0); } 40% { transform: translateY(-10px); } 60% { transform: translateY(-5px); } }
        @keyframes scrollBanner { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

        /* PORTADA (LOGO CIRCULAR) */
        #landing-view {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--dark-bg-main); 
            z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center;
            transition: opacity 0.5s ease;
        }
        .landing-logo { 
            width: 200px; height: 200px; 
            object-fit: cover; 
            border-radius: 50%; 
            border: 3px solid var(--accent-color); 
            margin-bottom: 40px; 
            animation: fadeInDown 1.5s ease;
            box-shadow: 0 0 30px rgba(255,255,255,0.2);
        }

        .enter-btn {
            background-color: var(--accent-color); color: var(--dark-bg-main);
            padding: 15px 50px; font-size: 1.2rem; border: none; border-radius: 50px; 
            cursor: pointer; text-transform: uppercase; font-weight: bold; 
            box-shadow: 0 0 20px rgba(255,255,255,0.1); transition: transform 0.2s;
            animation: fadeInUp 1.5s ease 0.5s backwards;
        }
        .enter-btn:hover { transform: scale(1.05); background-color: #ddd; }

        /* HEADER */
        header {
            background-color: var(--dark-bg-secondary); padding: 0.8rem 1.5rem; display: none;
            justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000;
            box-shadow: 0 2px 15px rgba(0,0,0,0.5); border-bottom: 1px solid var(--border-dark);
            animation: fadeInDown 0.5s ease;
        }
        .logo-container { display: flex; align-items: center; gap: 10px; cursor: pointer; }
        .menu-icon { font-size: 1.5rem; color: var(--accent-color); } 
        .logo-container img { height: 45px; width: auto; transition: transform 0.2s; border-radius: 50%; }
        .logo-container:hover img { transform: scale(1.05); }

        .cart-icon-btn {
            background: var(--accent-color); color: var(--dark-bg-main); 
            border: none; padding: 8px 18px; border-radius: 30px; font-weight: bold; cursor: pointer;
            display: flex; align-items: center; gap: 8px; font-size: 0.9rem;
            transition: transform 0.2s;
        }
        .cart-icon-btn:hover { transform: scale(1.05); background-color: #ddd; }
        .cart-bounce { animation: bounceCart 0.6s; }

        /* --- SIDEBAR --- */
        .sidebar-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 2000;
            opacity: 0; visibility: hidden; transition: 0.3s;
        }
        .sidebar-overlay.active { opacity: 1; visibility: visible; }
        
        .sidebar {
            position: fixed; top: 0; left: -280px; 
            width: 280px; height: 100%;
            background: var(--dark-bg-secondary);
            border-right: 1px solid var(--border-dark);
            z-index: 2001;
            transition: left 0.3s ease;
            padding: 20px; box-sizing: border-box;
            display: flex; flex-direction: column;
        }
        .sidebar.active { left: 0; }
        
        .sidebar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .sidebar-title { font-size: 1.3rem; font-weight: bold; }
        .close-sidebar-btn { background: transparent; border: none; color: var(--text-main); font-size: 2rem; cursor: pointer; }
        
        .sidebar-links { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 10px; }
        .sidebar-btn {
            width: 100%; text-align: left; padding: 12px 15px;
            background: rgba(255,255,255,0.05); border: none; border-radius: 8px;
            color: var(--text-main); font-size: 1rem; cursor: pointer; transition: 0.2s;
            display: flex; align-items: center; gap: 10px;
        }
        .sidebar-btn:hover { background: var(--accent-color); color: var(--dark-bg-main); }
        .sidebar-btn.promo { color: #ff5252; font-weight: bold; }

        /* --- TIENDA --- */
        #shop-view { display: none; max-width: 1200px; margin: 20px auto; padding: 0 20px 50px 20px; }
        @media (max-width: 768px) { .categories-container-top { display: none; } }

        .categories-container { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 15px; margin-bottom: 20px; scrollbar-width: none; }
        .categories-container::-webkit-scrollbar { display: none; }
        
        .filter-btn { 
            background: rgba(255,255,255,0.1); border: 1px solid var(--border-dark); color: var(--text-main);
            padding: 8px 20px; border-radius: 20px; cursor: pointer; white-space: nowrap; transition: 0.3s;
        }
        .filter-btn.active, .filter-btn:hover { background: var(--accent-color); color: var(--dark-bg-main); transform: translateY(-2px); }
        .filter-btn.promo-btn { background-color: var(--promo-red); border-color: var(--promo-red); font-weight: bold; }
        .filter-btn.promo-btn.active, .filter-btn.promo-btn:hover { background-color: #ff5252; color: white; transform: translateY(-2px) scale(1.05); box-shadow: 0 5px 15px rgba(211, 47, 47, 0.4); }

        .banner-wrapper { width: 100%; overflow: hidden; margin-bottom: 30px; position: relative; border-bottom: 1px solid var(--border-dark); padding-bottom: 20px; animation: fadeInDown 0.8s ease backwards; }
        .banner-track { display: flex; gap: 20px; width: max-content; animation: scrollBanner 30s linear infinite; }
        .banner-track:hover { animation-play-state: paused; }
        
        .banner-card { min-width: 160px; background: var(--card-bg); color: var(--text-dark); border: none; border-radius: 12px; padding: 10px; text-align: center; cursor: pointer; transition: 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .banner-card:hover { transform: scale(1.05); box-shadow: 0 10px 25px rgba(255,255,255,0.1); }
        .banner-card img { width: 70px; height: 70px; object-fit: contain; }

        .category-section { margin-bottom: 40px; animation: fadeInUp 0.8s ease backwards; }
        .category-title { 
            font-size: 1.4rem; margin-bottom: 15px; padding-left: 15px; 
            border-left: none; position: relative; text-transform: capitalize;
        }
        .category-title::before {
            content: ''; position: absolute; left: 0; top: 0; height: 100%; width: 4px; border-radius: 4px;
            background: linear-gradient(to bottom, var(--accent-color), rgba(255,255,255,0.1));
        }
        .category-title.promo-title { color: var(--promo-red); font-weight: bold; font-size: 1.6rem; }
        .category-title.promo-title::before { background: linear-gradient(to bottom, var(--promo-red), rgba(211, 47, 47, 0.1)); }

        .horizontal-scroll-row { display: flex; gap: 20px; overflow-x: auto; padding: 10px 5px 20px 5px; scroll-behavior: smooth; scrollbar-width: thin; }
        .horizontal-scroll-row::-webkit-scrollbar { height: 8px; }
        .horizontal-scroll-row::-webkit-scrollbar-track { background: #111; }
        .horizontal-scroll-row::-webkit-scrollbar-thumb { background: #444; border-radius: 4px; }

        .product-card { 
            background: var(--card-bg); color: var(--text-dark);
            min-width: 200px; width: 200px;
            padding: 15px; border-radius: 12px; text-align: center; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); 
            transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
            animation: fadeInUp 0.6s ease backwards; 
            border: 1px solid transparent; 
        }
        .product-card:hover { 
            transform: translateY(-8px); 
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.5), 0 0 30px rgba(255, 255, 255, 0.3), 0 0 50px rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.7);
            z-index: 2;
        }
        .product-img { width: 100%; height: 160px; object-fit: contain; margin-bottom: 10px; transition: transform 0.3s; }
        .product-card:hover .product-img { transform: scale(1.05); }
        .product-title { font-weight: 600; margin-bottom: 5px; height: 40px; display: flex; align-items: center; justify-content: center; font-size: 1rem;}
        .product-price { font-size: 1.2rem; font-weight: 800; color: #000; display: block; margin: 10px 0; }
        .add-btn { width: 100%; padding: 10px; background: #000; color: #fff; border: none; font-weight: bold; cursor: pointer; border-radius: 6px; transition: 0.2s; }
        .add-btn:hover { background: #333; }
        .add-btn:active { transform: scale(0.95); }

        /* --- DETALLE DE PRODUCTO --- */
        #product-detail-view { display: none; max-width: 1000px; margin: 20px auto; padding: 20px; animation: fadeInUp 0.5s ease; }
        .detail-container { display: flex; flex-wrap: wrap; gap: 30px; background: var(--dark-bg-secondary); padding: 30px; border-radius: 20px; border: 1px solid var(--border-dark); margin-bottom: 40px; box-shadow: 0 10px 40px rgba(0,0,0,0.5); }
        .detail-img-container { flex: 1 1 300px; display: flex; justify-content: center; align-items: center; background: #fff; border-radius: 15px; padding: 20px; }
        .detail-img { max-width: 100%; max-height: 400px; object-fit: contain; }
        .detail-info { flex: 1 1 300px; display: flex; flex-direction: column; justify-content: center; }
        .detail-title { font-size: 2rem; font-weight: bold; margin-bottom: 10px; line-height: 1.2; }
        .detail-price { font-size: 2.5rem; color: var(--accent-color); font-weight: 800; margin-bottom: 20px; }
        .detail-desc { color: #ccc; margin-bottom: 30px; font-size: 1.1rem; }
        .detail-buttons { display: flex; gap: 15px; }
        .detail-add-btn { flex: 2; padding: 15px; font-size: 1.2rem; background: var(--accent-color); color: #000; border: none; border-radius: 50px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .detail-add-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(255,255,255,0.4); }
        .detail-back-btn { flex: 1; padding: 15px; font-size: 1.2rem; background: transparent; border: 1px solid var(--border-dark); color: #fff; border-radius: 50px; cursor: pointer; transition: 0.3s; }
        .detail-back-btn:hover { background: rgba(255,255,255,0.1); }

        /* CARRITO */
        #cart-view { display: none; max-width: 800px; margin: 30px auto; padding: 0 20px; background: var(--dark-bg-secondary); border: 1px solid var(--border-dark); border-radius: 15px; min-height: 60vh; box-shadow: 0 10px 40px rgba(0,0,0,0.5); animation: fadeInUp 0.5s ease; }
        .cart-title { font-size: 1.5rem; border-bottom: 2px solid var(--border-dark); padding: 20px 0; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; font-weight: bold; }
        .cart-item-row { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px dashed var(--border-dark); transition: background-color 0.2s; }
        .cart-item-row:hover { background-color: rgba(255,255,255,0.05); }
        .item-thumb { width: 50px; height: 50px; object-fit: contain; border-radius: 5px; background: white;}
        .qty-btn { border: none; background: transparent; cursor: pointer; font-weight: bold; font-size: 1.2rem; padding: 0 10px; color: var(--accent-color); transition: transform 0.2s;}
        .qty-btn:active { transform: scale(1.2); }
        .whatsapp-btn { background-color: #25D366; color: white; width: 100%; padding: 18px; font-size: 1.2rem; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; margin-top: 20px; transition: 0.3s; }
        .whatsapp-btn:hover { background-color: #128C7E; transform: translateY(-3px); box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3); }

        footer { text-align: center; padding: 20px; margin-top: 50px; border-top: 1px solid var(--border-dark); color: #555; font-size: 0.8rem; }

        /* --- MODALES GENERALES --- */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 3000;
            justify-content: center; align-items: center;
            animation: fadeInDown 0.3s ease;
        }
        .modal-content {
            background: var(--dark-bg-secondary); border: 1px solid var(--border-dark);
            padding: 30px; border-radius: 15px; width: 90%; max-width: 400px;
            color: var(--text-main); text-align: center;
            box-shadow: 0 0 30px rgba(255,255,255,0.1);
        }
        .modal-title { font-size: 1.5rem; margin-bottom: 20px; font-weight: bold; }
        .payment-options { display: flex; flex-direction: column; gap: 15px; margin-bottom: 20px; }
        .payment-option {
            background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;
            cursor: pointer; border: 1px solid transparent; transition: 0.3s;
            display: flex; align-items: center; gap: 10px;
        }
        .payment-option:hover, .payment-option.selected { border-color: var(--accent-color); background: rgba(255,255,255,0.1); }
        .payment-option input { accent-color: var(--accent-color); transform: scale(1.3); }
        
        #cash-input-container { display: none; margin-top: 10px; }
        .cash-input { 
            width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #555; 
            background: #222; color: white; font-size: 1rem; box-sizing: border-box;
        }
        
        .confirm-pay-btn {
            background: #25D366; color: white; border: none; padding: 12px 30px; 
            border-radius: 50px; font-weight: bold; font-size: 1.1rem; cursor: pointer; width: 100%;
        }
        .close-modal { margin-top: 15px; background: transparent; border: none; color: #aaa; text-decoration: underline; cursor: pointer; }

        /* --- ESTILOS MODAL TRANSFERENCIA --- */
        .modal-content-white {
            background: white; color: #333; 
            padding: 25px; border-radius: 12px; max-width: 400px; width: 90%; text-align: center;
        }
        .alerta-pago {
            background-color: #fff3cd; color: #856404; border: 1px solid #ffeeba;
            padding: 12px; border-radius: 6px; margin: 15px 0; font-size: 0.95em; text-align: left;
        }
        .btn-copiar-alias {
            display: block; width: 100%; background-color: var(--naranjax); color: white;
            padding: 12px 0; border:none; border-radius: 8px; font-weight: bold; margin-bottom: 10px;
            cursor: pointer; font-size: 1rem;
        }
        .btn-copiar-alias:hover { background-color: #e65c00; }
        .btn-wsp-trans {
            display: block; width: 100%; background-color: #25D366; color: white;
            padding: 12px 0; border: none; border-radius: 8px; font-weight: bold; font-size: 16px; cursor: pointer;
        }
        .btn-wsp-trans:hover { background-color: #128C7E; }
        .step-text { text-align: left; font-weight: bold; margin-bottom: 5px; color: #555; font-size: 0.9rem; }
        .step-block { margin-bottom: 20px; }
        .alias-display {
            width: 100%; padding: 12px; font-weight: bold; text-align: center; 
            background: #f4f4f4; border: 1px solid #ccc; border-radius: 8px; 
            color: #333; font-size: 1.1rem; letter-spacing: 1px;
            margin-bottom: 10px; box-sizing: border-box;
        }

        /* CELULARES */
        @media (max-width: 768px) {
            html { font-size: 14px; }
            header { padding: 0.5rem 1rem; }
            .logo-container img { height: 35px; }
            .cart-icon-btn { font-size: 0.8rem; padding: 6px 12px; }
            #shop-view { padding: 0 10px 50px 10px; }
            .banner-card { min-width: 130px; padding: 8px; }
            .banner-card img { height: 50px; width: 50px; }
            .category-title { font-size: 1.2rem; margin-bottom: 10px; }
            .horizontal-scroll-row { gap: 15px; padding: 5px 5px 15px 5px; }
            .product-card { min-width: 150px; width: 150px; padding: 10px; }
            .product-img { height: 110px; margin-bottom: 5px; }
            .product-title { font-size: 0.9rem; height: 35px; line-height: 1.1; margin-bottom: 3px; }
            .product-price { font-size: 1rem; margin: 5px 0; }
            .add-btn { padding: 8px; font-size: 0.9rem; }
            .detail-container { flex-direction: column; padding: 15px; gap: 20px; }
            .detail-img-container { padding: 10px; }
            .detail-img { max-height: 250px; }
            #cart-view { padding: 0 10px; width: 95%; margin: 20px auto; }
        }
    </style>
</head>
<body>

<div id="landing-view">
    <img src="logo-luto.png" alt="Luto Bebidas" class="landing-logo" onerror="this.style.display='none'; document.querySelector('.enter-btn').innerHTML='Ingresar al Cat√°logo'">
    <button class="enter-btn" onclick="enterSite()">Ingresar al Cat√°logo</button>
</div>

<header id="main-header">
    <div class="logo-container" onclick="openSidebar()">
        <span class="menu-icon">‚ò∞</span>
        <img src="logo-luto.png" alt="Luto" onerror="this.src='https://via.placeholder.com/100?text=LUTO'">
    </div>
    <button class="cart-icon-btn" id="cartBtn" onclick="showCart()">
        üõí Ver Carrito (<span id="header-count">0</span>)
    </button>
</header>

<div id="sidebar-overlay" class="sidebar-overlay" onclick="closeSidebar()"></div>
<div id="sidebar-menu" class="sidebar">
    <div class="sidebar-header">
        <span class="sidebar-title">Categor√≠as</span>
        <button class="close-sidebar-btn" onclick="closeSidebar()">√ó</button>
    </div>
    <ul class="sidebar-links">
        <li><button class="sidebar-btn" onclick="goHome(); closeSidebar();">üè† Inicio / Todos</button></li>
        <li><button class="sidebar-btn promo" onclick="renderShop('promociones-navidenas'); closeSidebar();">üéÑ Promos Navide√±as</button></li>
        <li><button class="sidebar-btn" onclick="renderShop('fernet'); closeSidebar();">üç∑ Fernet</button></li>
        <li><button class="sidebar-btn" onclick="renderShop('vodka'); closeSidebar();">üç∏ Vodka</button></li>
        <li><button class="sidebar-btn" onclick="renderShop('sin-alcohol'); closeSidebar();">ü•§ Gaseosas</button></li>
        <li><button class="sidebar-btn" onclick="renderShop('cervezas'); closeSidebar();">üç∫ Cervezas</button></li>
        <li><button class="sidebar-btn" onclick="renderShop('vinos'); closeSidebar();">üçá Vinos</button></li>
    </ul>
</div>

<div id="shop-view">
    <div class="categories-container categories-container-top">
        <button class="filter-btn promo-btn" onclick="renderShop('promociones-navidenas')">üéÑ Promos Navide√±as</button>
        <button class="filter-btn active" onclick="renderShop('todos')">Todos</button>
        <button class="filter-btn" onclick="renderShop('fernet')">Fernet</button>
        <button class="filter-btn" onclick="renderShop('vodka')">Vodka</button>
        <button class="filter-btn" onclick="renderShop('sin-alcohol')">Gaseosas</button>
        <button class="filter-btn" onclick="renderShop('cervezas')">Cervezas</button>
        <button class="filter-btn" onclick="renderShop('vinos')">Vinos</button>
    </div>

    <div class="banner-wrapper">
        <div class="banner-track" id="banner-track"></div>
    </div>

    <div id="products-container"></div>
</div>

<div id="product-detail-view">
    <div class="detail-container">
        <div class="detail-img-container">
            <img id="detail-img" src="" alt="Producto" class="detail-img">
        </div>
        <div class="detail-info">
            <div style="color:#aaa; text-transform:uppercase; margin-bottom:10px;" id="detail-cat">CATEGOR√çA</div>
            <h1 class="detail-title" id="detail-title">Nombre Producto</h1>
            <div class="detail-price" id="detail-price">$0</div>
            <p class="detail-desc">¬°Excelente elecci√≥n! Agrega este producto a tu carrito para disfrutar de la mejor calidad. Env√≠os r√°pidos y seguros.</p>
            
            <div class="detail-buttons">
                <button class="detail-back-btn" onclick="goHome()">‚Üê Volver</button>
                <button class="detail-add-btn" id="detail-add-btn">AGREGAR AL CARRITO</button>
            </div>
        </div>
    </div>

    <div class="category-section">
        <div class="category-title">Tambi√©n te podr√≠a interesar...</div>
        <div class="horizontal-scroll-row" id="related-products-container"></div>
    </div>
</div>

<div id="cart-view">
    <div class="cart-title">
        <span>Tu Pedido</span>
        <button style="border:none; background:transparent; text-decoration:underline; cursor:pointer; color:#fff;" onclick="goHome()">‚Üê Volver</button>
    </div>
    <div id="cart-list-container"></div>
    <div style="text-align:right; margin-top:30px;">
        Total: <span style="font-size:2rem; font-weight:bold;">$<span id="final-total">0</span></span>
    </div>
    <button class="whatsapp-btn" onclick="openDeliveryModal()">CONTINUAR COMPRA</button>
</div>

<div id="delivery-modal" class="modal-overlay" style="z-index: 3000;">
    <div class="modal-content">
        <div class="modal-title">¬øC√≥mo recibes tu pedido?</div>
        
        <div class="payment-options">
            <label class="payment-option">
                <input type="radio" name="delivery" value="delivery" checked>
                <span>üõµ Env√≠o a Domicilio</span>
            </label>
            
            <label class="payment-option">
                <input type="radio" name="delivery" value="retiro">
                <span>üè™ Retiro en Local</span>
            </label>
        </div>

        <button class="confirm-pay-btn" onclick="nextStepToPayment()">SIGUIENTE</button>
        <button class="close-modal" onclick="closeDeliveryModal()">Cancelar</button>
    </div>
</div>

<div id="payment-modal" class="modal-overlay" style="z-index: 3000;">
    <div class="modal-content">
        <div class="modal-title">¬øC√≥mo deseas abonar?</div>
        
        <div class="payment-options">
            <label class="payment-option" onclick="selectPayment('efectivo')">
                <input type="radio" name="payment" value="efectivo" checked>
                <span>üíµ Efectivo (Contra entrega)</span>
            </label>
            
            <div id="cash-input-container">
                <input type="number" id="cash-amount" class="cash-input" placeholder="¬øCon cu√°nto abonas? (Ej: 20000)">
            </div>

            <label class="payment-option" onclick="selectPayment('transferencia')">
                <input type="radio" name="payment" value="transferencia">
                <span>üì± Transferencia / Alias</span>
            </label>
        </div>

        <button class="confirm-pay-btn" onclick="finalizeOrder()">ENVIAR PEDIDO</button>
        <button class="close-modal" onclick="closePaymentModal()">Atr√°s</button>
    </div>
</div>

<div id="modalTransferencia" class="modal-overlay" style="z-index: 3000;">
    <div class="modal-content-white">
        <h3>Pago por Transferencia</h3>
        
        <div class="alerta-pago">
            ‚ö†Ô∏è <strong>PASOS:</strong><br>
            1. Copia el Alias.<br>
            2. Realiza el pago desde tu Banco o Billetera Virtual (Naranja X, MP, etc.)<br>
            3. Env√≠anos el comprobante.
        </div>

        <div class="step-block">
            <div class="step-text">Alias a transferir:</div>
            
            <input type="text" value="TU.ALIAS.NARANJA.X" id="alias-input" class="alias-display" readonly>
            
            <button onclick="copiarAlias()" class="btn-copiar-alias">
                üìã COPIAR ALIAS
            </button>
            <div id="copia-exito" style="display:none; color:green; font-weight:bold; margin-top:5px;">
                ¬°Copiado! ‚úÖ
            </div>
        </div>

        <div class="step-block">
            <button onclick="enviarPedidoTransferencia()" class="btn-wsp-trans">
                Ir a WhatsApp (Pago Realizado)
            </button>
        </div>

        <button onclick="cerrarModalTransferencia()" class="close-modal" style="color:#666;">Volver atr√°s</button>
    </div>
</div>

<footer>
    <p>&copy; 2024 Luto Bebidas - Todos los derechos reservados</p>
</footer>

<script>
    // === CONFIGURACI√ìN ===
    const phoneNumber = "5493425406314"; 
    // üëáüëáüëá PON TU ALIAS REAL AQUI ABAJO üëáüëáüëá
    const miAlias = "luto.bebidas"; 
    // ==========================================

    // BASE DE DATOS DE PRODUCTOS
    const products = [
        { id: 901, name: "Sidra 1888 750ml", category: "promociones-navidenas", price: 6500, img: "1888.png" },
        { id: 902, name: "Sidra 1888 Ros√© 750ml", category: "promociones-navidenas", price: 7700, img: "1888rose.png" },
        { id: 903, name: "Sidra Tunuy√°n 750ml", category: "promociones-navidenas", price: 3000, img: "tunuyan.png" },
        { id: 904, name: "Sidra 1888 Pack x6", category: "promociones-navidenas", price: 36000, img: "1888_pack.png" },
        { id: 905, name: "Sidra 1888 Ros√© Pack x6", category: "promociones-navidenas", price: 43800, img: "1888rose_pack.png" },
        { id: 906, name: "Sidra Tunuy√°n Pack x6", category: "promociones-navidenas", price: 15600, img: "tunuyan_pack.png" },
        { id: 910, name: "1 Jagger + 4 Speed XL", category: "promociones-navidenas", price: 32800, img: "jagger_speedxl.png" },
        { id: 911, name: "1 Jagger + 4 Speed 250ml", category: "promociones-navidenas", price: 29800, img: "jagger_speed.png" },
        { id: 912, name: "1 Jagger + 4 Redbull", category: "promociones-navidenas", price: 34800, img: "jagger_redbull.png" },
        { id: 913, name: "1 Jagger + 4 Monster", category: "promociones-navidenas", price: 35800, img: "jagger_monster.png" },
        { id: 914, name: "2 Jagger + 8 Speed XL", category: "promociones-navidenas", price: 64000, img: "2jagger_speedxl.png" },
        { id: 915, name: "2 Jagger + 8 Speed 250ml", category: "promociones-navidenas", price: 58600, img: "2jagger_speed.png" },
        { id: 916, name: "2 Jagger + 8 Redbull", category: "promociones-navidenas", price: 68600, img: "2jagger_redbull.png" },
        { id: 917, name: "2 Jagger + 8 Monster", category: "promociones-navidenas", price: 68600, img: "2jagger_monster.png" },
        { id: 1, name: "Fernet Branca 750ml", category: "fernet", price: 9500, img: "fernet750.png" },
        { id: 301, name: "Absolut Vodka Tradicional", category: "vodka", price: 19000, img: "absolut.png" },
        { id: 302, name: "Absolut Vodka Saborizado", category: "vodka", price: 19500, img: "absolutsabor.png" },
        { id: 303, name: "Smirnoff Tradicional", category: "vodka", price: 7500, img: "smirnoff.png" },
        { id: 304, name: "Smirnoff Saborizado", category: "vodka", price: 8000, img: "smirnoffsabor.png" },
        { id: 305, name: "Skyy Vodka Tradicional", category: "vodka", price: 7700, img: "skyy.png" },
        { id: 306, name: "Skyy Vodka Saborizado", category: "vodka", price: 8500, img: "skyysabor.png" },
        { id: 307, name: "Skyy Cosmic", category: "vodka", price: 9500, img: "skyycosmic.png" },
        { id: 308, name: "Sernova Vodka Saborizado", category: "vodka", price: 7700, img: "sernovasabor.png" },
        { id: 101, name: "Coca-Cola 1.5L", category: "sin-alcohol", price: 3000, img: "coca15.png" },
        { id: 102, name: "Coca-Cola 1.75L", category: "sin-alcohol", price: 3300, img: "coca175.png" },
        { id: 103, name: "Coca-Cola 2.5L", category: "sin-alcohol", price: 3500, img: "coca25.png" },
        { id: 104, name: "Coca-Cola 2.75L", category: "sin-alcohol", price: 3700, img: "coca275.png" },
        { id: 105, name: "Coca Retornable 2L", category: "sin-alcohol", price: 3000, img: "cocaret2l.png" },
        { id: 106, name: "Sprite 1.5L", category: "sin-alcohol", price: 3000, img: "sprite15.png" },
        { id: 107, name: "Sprite 1.75L", category: "sin-alcohol", price: 3300, img: "sprite175.png" },
        { id: 108, name: "Sprite Zero 1.75L", category: "sin-alcohol", price: 3000, img: "spritezero175.png" },
        { id: 109, name: "7up 1.5L", category: "sin-alcohol", price: 2000, img: "7up15.png" },
        { id: 110, name: "Pepsi 1.5L", category: "sin-alcohol", price: 2000, img: "pepsi15.png" },
        { id: 111, name: "Manaos Pomelo 3L", category: "sin-alcohol", price: 0, img: "manaos3l.png" },
        { id: 112, name: "Paso de los Toros Pomelo", category: "sin-alcohol", price: 2400, img: "pasopomelo.png" },
        { id: 113, name: "Paso de los Toros T√≥nica", category: "sin-alcohol", price: 2400, img: "pasotonica.png" },
        { id: 201, name: "Budweiser Lata 473ml", category: "cervezas", price: 1800, img: "budlata.png" },
        { id: 202, name: "Budweiser Pack x6 (Lata)", category: "cervezas", price: 10000, img: "budpack.png" },
        { id: 203, name: "Santa Fe Lata 473ml", category: "cervezas", price: 1600, img: "sfelata.png" },
        { id: 204, name: "Santa Fe Pack x6 (Lata)", category: "cervezas", price: 9500, img: "sfepack.png" },
        { id: 205, name: "Santa Fe Pilsen Lata", category: "cervezas", price: 1900, img: "sfepilsenlata.png" },
        { id: 206, name: "Santa Fe Pilsen Pack x6", category: "cervezas", price: 11000, img: "sfepilsenpack.png" },
        { id: 207, name: "Brahma Pack x6 (Lata)", category: "cervezas", price: 0, img: "brahmapack.png" },
        { id: 208, name: "Heineken Lata 473ml", category: "cervezas", price: 2500, img: "heinekenlata.png" },
        { id: 209, name: "Heineken Pack x6 (Lata)", category: "cervezas", price: 14500, img: "heinekenpack.png" },
        { id: 210, name: "Miller Lata 473ml", category: "cervezas", price: 2200, img: "millerlata.png" },
        { id: 211, name: "Miller Pack x6 (Lata)", category: "cervezas", price: 12600, img: "millerpack.png" },
        { id: 212, name: "Stella Artois Pack x6", category: "cervezas", price: 0, img: "stellapack.png" },
        { id: 220, name: "Corona Porr√≥n 330ml", category: "cervezas", price: 2400, img: "coronapinina.png" },
        { id: 221, name: "Corona Pack x6 (330ml)", category: "cervezas", price: 14000, img: "coronapack.png" },
        { id: 222, name: "Stella Artois Pack x6 (Pinina)", category: "cervezas", price: 0, img: "stellapininapack.png" },
        { id: 223, name: "Miller Pack x6 (Pinina)", category: "cervezas", price: 0, img: "millerpininapack.png" },
        { id: 230, name: "Budweiser 1 Litro", category: "cervezas", price: 0, img: "bud1l.png" },
        { id: 231, name: "Corona 750ml", category: "cervezas", price: 0, img: "corona750.png" },
        { id: 232, name: "Miller 1 Litro", category: "cervezas", price: 3000, img: "miller1l.png" },
        { id: 233, name: "Bajo Cero 1 Litro", category: "cervezas", price: 0, img: "bajocero1l.png" },
        { id: 234, name: "Santa Fe 1 Litro", category: "cervezas", price: 2800, img: "sfe1l.png" },
        { id: 235, name: "Santa Fe Pilsen 1 Litro", category: "cervezas", price: 3000, img: "sfepilsen1l.png" },
        { id: 3, name: "Cerveza Quilmes Pack x6", category: "cervezas", price: 8200, img: "quilmespack.png" },
        { id: 4, name: "Vino Malbec Rutini", category: "vinos", price: 12500, img: "rutini.png" }
    ];

    let cart = [];
    let headerCount, cartBtn, productsContainer;
    let selectedDeliveryMethod = ""; // VARIABLE PARA GUARDAR ELECCION

    // --- FUNCIONES NAVEGACI√ìN Y SIDEBAR ---
    function enterSite() {
        document.getElementById('landing-view').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('landing-view').style.display = 'none';
            document.getElementById('main-header').style.display = 'flex';
            document.getElementById('shop-view').style.display = 'block';
        }, 500);
    }
    
    function showCart() {
        document.getElementById('shop-view').style.display = 'none';
        document.getElementById('product-detail-view').style.display = 'none';
        document.getElementById('cart-view').style.display = 'block';
        closeSidebar();
        renderCartDetail(); 
        window.scrollTo(0,0);
    }
    
    function goHome() {
        document.getElementById('cart-view').style.display = 'none';
        document.getElementById('product-detail-view').style.display = 'none';
        document.getElementById('shop-view').style.display = 'block';
        closeSidebar();
        renderShop('todos');
        window.scrollTo(0,0);
    }

    function openSidebar() {
        document.getElementById('sidebar-menu').classList.add('active');
        document.getElementById('sidebar-overlay').classList.add('active');
    }

    function closeSidebar() {
        document.getElementById('sidebar-menu').classList.remove('active');
        document.getElementById('sidebar-overlay').classList.remove('active');
    }

    function openDetail(id) {
        const product = products.find(p => p.id === id);
        if(!product) return;
        document.getElementById('shop-view').style.display = 'none';
        document.getElementById('product-detail-view').style.display = 'block';
        window.scrollTo(0,0);

        document.getElementById('detail-img').src = product.img;
        document.getElementById('detail-img').onerror = function() { this.src='https://via.placeholder.com/300'; };
        document.getElementById('detail-cat').innerText = product.category.replace(/-/g, ' ').toUpperCase();
        document.getElementById('detail-title').innerText = product.name;
        document.getElementById('detail-price').innerText = product.price === 0 ? "Consultar" : `$${product.price}`;
        
        const btn = document.getElementById('detail-add-btn');
        btn.onclick = function() {
            addToCart(product.id);
            btn.innerText = "¬°AGREGADO!";
            setTimeout(() => { btn.innerText = "AGREGAR AL CARRITO"; }, 1500);
        };

        const relatedContainer = document.getElementById('related-products-container');
        relatedContainer.innerHTML = '';
        const related = products.filter(p => p.category === product.category && p.id !== product.id);
        if(related.length < 3) { related.push(...products.filter(p => p.category !== product.category).slice(0, 5)); }

        related.forEach(p => {
            let priceDisplay = p.price === 0 ? "Consultar" : `$${p.price}`;
            const card = document.createElement('div');
            card.className = 'product-card';
            card.innerHTML = `
                <div onclick="openDetail(${p.id})" style="cursor:pointer">
                    <img src="${p.img}" alt="${p.name}" class="product-img" onerror="this.src='https://via.placeholder.com/150'">
                    <div style="color:#777; font-size:0.8rem; text-transform:uppercase;">${p.category}</div>
                    <div class="product-title">${p.name}</div>
                    <div class="product-price">${priceDisplay}</div>
                </div>
                <button class="add-btn" onclick="addToCart(${p.id})">AGREGAR</button>
            `;
            relatedContainer.appendChild(card);
        });
    }

    // --- L√ìGICA TIENDA ---
    function renderBanner() {
        const track = document.getElementById('banner-track');
        if(!track) return;
        track.innerHTML = '';
        const featured = [...products.slice(0, 15), ...products.slice(0, 15)]; 
        featured.forEach(p => {
            let priceDisplay = p.price === 0 ? "Consultar" : `$${p.price}`;
            const card = document.createElement('div');
            card.className = 'banner-card';
            card.onclick = () => openDetail(p.id);
            card.innerHTML = `<img src="${p.img}" onerror="this.src='https://via.placeholder.com/80'"><div style="font-weight:bold; font-size:0.9rem; margin-top:5px;">${p.name}</div><div style="color:#333; font-weight:bold; font-size:0.9rem;">${priceDisplay}</div>`;
            track.appendChild(card);
        });
    }

    function renderShop(filter = 'todos') {
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        const btns = document.querySelectorAll('.filter-btn');
        btns.forEach(b => { if(b.getAttribute('onclick').includes(`'${filter}'`)) b.classList.add('active'); });

        if(!productsContainer) productsContainer = document.getElementById('products-container');
        if(!productsContainer) return;
        productsContainer.innerHTML = '';

        let categoriesToShow = [];
        if (filter === 'todos') {
            let allCats = [...new Set(products.map(p => p.category))];
            if(allCats.includes('promociones-navidenas')) {
                allCats = allCats.filter(c => c !== 'promociones-navidenas'); allCats.unshift('promociones-navidenas'); 
            }
            categoriesToShow = allCats;
        } else { categoriesToShow = [filter]; }

        categoriesToShow.forEach(cat => {
            const productsInCat = products.filter(p => p.category === cat);
            if(productsInCat.length > 0) {
                let displayTitle = cat.replace('-', ' ').toUpperCase(); 
                let extraClass = "";
                if(cat === 'sin-alcohol') displayTitle = "GASEOSAS Y AGUAS";
                if(cat === 'promociones-navidenas') { displayTitle = "üéÑ PROMOCIONES NAVIDE√ëAS üéÑ"; extraClass = "promo-title"; }

                const section = document.createElement('div');
                section.className = 'category-section';
                section.innerHTML = `<div class="category-title ${extraClass}">${displayTitle}</div>`;
                const row = document.createElement('div');
                row.className = 'horizontal-scroll-row';

                productsInCat.forEach(p => {
                    let priceDisplay = p.price === 0 ? "Consultar" : `$${p.price}`;
                    const card = document.createElement('div');
                    card.className = 'product-card';
                    card.innerHTML = `
                        <div onclick="openDetail(${p.id})" style="cursor:pointer">
                            <img src="${p.img}" alt="${p.name}" class="product-img" onerror="this.src='https://via.placeholder.com/150?text=Sin+Imagen'">
                            <div style="color:#777; font-size:0.8rem; text-transform:uppercase;">${p.category.replace('promociones-navidenas', 'Navidad')}</div>
                            <div class="product-title">${p.name}</div>
                            <div class="product-price">${priceDisplay}</div>
                        </div>
                        <button class="add-btn" onclick="addToCart(${p.id})">AGREGAR</button>
                    `;
                    row.appendChild(card);
                });
                section.appendChild(row);
                productsContainer.appendChild(section);
            }
        });
    }

    function addToCart(id) {
        const product = products.find(p => p.id === id);
        const item = cart.find(i => i.id === id);
        if (item) item.qty++; else cart.push({ ...product, qty: 1 });
        updateHeaderCount();
        if(cartBtn) { cartBtn.classList.add('cart-bounce'); setTimeout(() => { cartBtn.classList.remove('cart-bounce'); }, 600); }
    }

    function updateHeaderCount() {
        if(!headerCount) headerCount = document.getElementById('header-count');
        if(headerCount) headerCount.innerText = cart.reduce((sum, item) => sum + item.qty, 0);
    }

    function renderCartDetail() {
        const container = document.getElementById('cart-list-container');
        const totalElem = document.getElementById('final-total');
        if(!container) return;
        container.innerHTML = '';
        let total = 0;
        if(cart.length === 0) {
            container.innerHTML = '<p style="text-align:center; color:#ccc; margin-top:50px;">Carrito vac√≠o</p>';
            if(totalElem) totalElem.innerText = "0"; return;
        }
        cart.forEach((item, index) => {
            total += item.price * item.qty;
            container.innerHTML += `
                <div class="cart-item-row">
                    <div style="display:flex; align-items:center; gap:10px;">
                        <img src="${item.img}" class="item-thumb" onerror="this.src='https://via.placeholder.com/50'">
                        <div><div style="font-weight:bold;">${item.name}</div><div style="font-size:0.9rem; color:#bbb;">$${item.price} c/u</div></div>
                    </div>
                    <div style="white-space:nowrap;">
                        <button class="qty-btn" onclick="changeQty(${index}, -1)">-</button>${item.qty}<button class="qty-btn" onclick="changeQty(${index}, 1)">+</button>
                    </div>
                    <div style="font-weight:bold; min-width:60px; text-align:right;">$${item.price * item.qty}</div>
                </div>
            `;
        });
        if(totalElem) totalElem.innerText = total;
    }

    function changeQty(index, delta) {
        cart[index].qty += delta;
        if(cart[index].qty <= 1 && delta === -1) { if(confirm("¬øEliminar?")) cart.splice(index, 1); else return; } else { if(cart[index].qty<=0) cart.splice(index, 1); }
        updateHeaderCount();
        renderCartDetail();
    }

    // --- LOGICA MODAL ENTREGA (NUEVO) ---
    function openDeliveryModal() {
        if(cart.length === 0) return;
        document.getElementById('delivery-modal').style.display = 'flex';
    }

    function closeDeliveryModal() {
        document.getElementById('delivery-modal').style.display = 'none';
    }

    function nextStepToPayment() {
        // Guardar opci√≥n seleccionada
        const options = document.getElementsByName('delivery');
        for(let op of options) {
            if(op.checked) selectedDeliveryMethod = op.value;
        }
        closeDeliveryModal();
        openPaymentModal();
    }

    // --- LOGICA MODAL PAGO ---
    function openPaymentModal() {
        document.getElementById('payment-modal').style.display = 'flex';
    }

    function closePaymentModal() {
        document.getElementById('payment-modal').style.display = 'none';
        // Opcional: Volver al modal anterior si cancelan?
        // openDeliveryModal(); 
    }

    function selectPayment(method) {
        const cashInput = document.getElementById('cash-input-container');
        if(method === 'efectivo') {
            cashInput.style.display = 'block';
        } else {
            cashInput.style.display = 'none';
        }
    }

    function copiarAlias() {
        const aliasInput = document.getElementById("alias-input");
        aliasInput.select();
        aliasInput.setSelectionRange(0, 99999); 
        navigator.clipboard.writeText(aliasInput.value).then(() => {
            const msg = document.getElementById("copia-exito");
            msg.style.display = "block";
            setTimeout(() => { msg.style.display = "none"; }, 3000);
        });
    }

    // --- FINALIZAR PEDIDO (EFECTIVO) ---
    function finalizeOrder() {
        const paymentMethod = document.querySelector('input[name="payment"]:checked').value;
        let total = cart.reduce((sum, i) => sum + (i.price * i.qty), 0);

        if (paymentMethod === 'transferencia') {
            closePaymentModal(); 
            document.getElementById('modalTransferencia').style.display = 'flex'; 
            return; 
        }

        // CONSTRUIR MENSAJE
        let msg = `Hola *Luto Bebidas*, quiero confirmar mi pedido:%0A%0A`;
        cart.forEach(i => { msg += `- ${i.name} (x${i.qty}): $${i.price*i.qty}%0A`; });
        msg += `%0A*TOTAL FINAL: $${total}*`;

        // Agregar Datos de Entrega
        if(selectedDeliveryMethod === 'delivery') {
            msg += `%0A%0Aüõµ *ENTREGA: DELIVERY*`;
            msg += `%0A(Por favor completa tus datos)`;
            msg += `%0ANombre: `;
            msg += `%0ADirecci√≥n: `;
        } else {
            msg += `%0A%0Aüè™ *ENTREGA: RETIRO EN LOCAL*`;
            msg += `%0A(Por favor completa tus datos)`;
            msg += `%0ANombre: `;
        }

        const amount = document.getElementById('cash-amount').value;
        if(!amount || amount < total) {
            alert("Por favor ingresa un monto v√°lido con el que vas a abonar (mayor o igual al total).");
            return;
        }
        const change = amount - total;
        
        msg += `%0A%0Aüíµ *PAGO CON: EFECTIVO*`;
        msg += `%0AAbono con: $${amount}`;
        msg += `%0AVuelto necesario: $${change}`;

        window.open(`https://wa.me/${phoneNumber}?text=${msg}`, '_blank');
        closePaymentModal();
    }

    // --- FINALIZAR PEDIDO (TRANSFERENCIA) ---
    function enviarPedidoTransferencia() {
        let total = cart.reduce((sum, i) => sum + (i.price * i.qty), 0);
        
        let msg = `Hola *Luto Bebidas*, quiero confirmar mi pedido:%0A%0A`;
        cart.forEach(i => { msg += `- ${i.name} (x${i.qty}): $${i.price*i.qty}%0A`; });
        msg += `%0A*TOTAL FINAL: $${total}*`;

        // Agregar Datos de Entrega
        if(selectedDeliveryMethod === 'delivery') {
            msg += `%0A%0Aüõµ *ENTREGA: DELIVERY*`;
            msg += `%0A(Por favor completa tus datos)`;
            msg += `%0ANombre: `;
            msg += `%0ADirecci√≥n: `;
        } else {
            msg += `%0A%0Aüè™ *ENTREGA: RETIRO EN LOCAL*`;
            msg += `%0A(Por favor completa tus datos)`;
            msg += `%0ANombre: `;
        }

        msg += `%0A%0Aüì± *PAGO CON: TRANSFERENCIA*`;
        msg += `%0A‚úÖ *YA COPI√â EL ALIAS Y PAGU√â*`;
        msg += `%0A(Adjunto comprobante a continuaci√≥n...)`;

        window.open(`https://wa.me/${phoneNumber}?text=${msg}`, '_blank');
        cerrarModalTransferencia();
        goHome();
    }

    function cerrarModalTransferencia() {
        document.getElementById('modalTransferencia').style.display = 'none';
    }

    // 5. INICIALIZACI√ìN
    document.addEventListener("DOMContentLoaded", () => {
        headerCount = document.getElementById('header-count');
        cartBtn = document.getElementById('cartBtn');
        productsContainer = document.getElementById('products-container');
        
        const aliasInput = document.getElementById('alias-input');
        if(aliasInput) aliasInput.value = miAlias;

        renderBanner();
        renderShop('todos');
        selectPayment('efectivo');
    });
</script>

</body>
</html>